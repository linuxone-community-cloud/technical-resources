# CVE-2023-25690 Vulnerability Temp Fix
### Date: 2023/03

## Description
- The version of Apache httpd installed on the remote host is prior to 2.4.56. It is, therefore, affected by multiple vulnerabilities as referenced in the 2.4.56 advisory.
- HTTP request splitting with mod_rewrite and mod_proxy: Some mod_proxy configurations on Apache HTTP Server versions 2.4.0 through 2.4.55 allow a HTTP Request Smuggling attack. Configurations
are affected when mod_proxy is enabled along with some form of RewriteRule or ProxyPassMatch
in which a non-specific pattern matches some portion of the user-supplied request-target (URL)
data and is then re-inserted into the proxied request-target using variable substitution. For example, something like: RewriteEngine on RewriteRule ^/here/(.*) http://example.com:8080/elsewhere?$1 http://example.com:8080/elsewhere ; [P] ProxyPassReverse /here/ http://example.com:8080/ http:// example.com:8080/ Request splitting/smuggling could result in bypass of access controls in the proxy server, proxying unintended URLs to existing origin servers, and cache poisoning. Acknowledgements: finder: Lars Krapf of Adobe (CVE-2023-25690)
- Apache HTTP Server: mod_proxy_uwsgi HTTP response splitting: HTTP Response Smuggling vulnerability in Apache HTTP Server via mod_proxy_uwsgi. This issue affects Apache HTTP Server: from 2.4.30 through 2.4.55.
Special characters in the origin response header can truncate/split the response forwarded to the client. Acknowledgements: finder: Dimas Fariski Setyawan Putra (nyxsorcerer) (CVE-2023-27522)

## Temporary Fix Instructions
Before you can get the Apache httpd 2.4.56 from Linux distros officially, we have compipled the package from source code. You can follow below instructions to get the Apache httpd binary code and run it on your LinuxONE VM in the LinuxONE Community Cloud. 

1. Delete your current Aapache http server from your VM.
2. Get the Apache 2.4.56
```
wget http://148.100.42.7/packages/apache2_2.4.56_s390x.tar.gz
```
3. Unpack the package. 
```
tar xvfz apache2_2.4.56_s390x.tar.gz
```
4. After unpack, you will see the files like below. 
```
$ ls
apache2  apache2.service
```
5. Copy `apache2` to `/usr/local/`

6. Note: RHEL 7 packages do not support Apache version 2.4.56

7. Note: For RHEL 9 you must install libxcrypt-compat.  
```
sudo dnf install libxcrypt-compat
```

8. If you want to use the systemd to manage the httpd service, copy the file `apache2.service` to your distro's systemd library directory. The directory location varies in different distros. Below is the directory location of each distro:
   - RHEL and SLES: `/usr/lib/systemd/system`
   - Ubuntu: `/lib/systemd/system` 

9. Enable the service and start the http server
   ```
   systemctl enable apache2.service
   systemctl start apache2.service
   ```



